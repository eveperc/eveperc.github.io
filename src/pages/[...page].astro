---
import type { GetStaticPathsOptions } from "astro";
import Layout from "../layouts/Layout.astro";
import { MyContent } from "../components/Content";
import { MyLowContent } from "../components/LowContent";
import { Pagination } from "../components/Pagination";
import "../styles/global.scss";

import { newtClient } from "../lib/newt";
import type { Article, Page } from "../lib/newt";

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
  const postsData = await newtClient.getContents<Article>({
    appUid: "blog",
    modelUid: "article",
    query: {
      select: ["title", "slug", "body", "coverImage", "updatedAt"],
    },
  });
  const postsContents: Article[] = postsData.items;

  return paginate(postsContents, {
    pageSize: 9,
  });
}

interface Props {
  page: Page;
}
const { page } = Astro.props;
const data: Article[] = page.data;
---

<Layout id="top" title="NeoEveLog" description="ネオイブログ">
  <MyContent articles={data} />
  <MyLowContent>
    <Pagination page={page} />
  </MyLowContent>
</Layout>
